---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warnings = FALSE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# THfuncs

## Installation

You can install the development version of THfuncs like so:


```{r, eval=TRUE}
# install.packages("devtools")
library(devtools)
devtools::install_github("tomambroseharris/THfuncs", force = TRUE)
library(THfuncs)
```

# Purpose

THfuncs houses functions created to help with data analysis, data manipulation and other functionality in R.  

The first (and currently only function) contained in this package is `prop_in_group()`. This transforms tidy data into a grouped proportion table, using columns in the data. It can be generalised to summarise wide data frames, as shown in the example below.



## See what the function does
```{r, eval=FALSE}
?prop_in_group()
```

# Use
```{r, eval=FALSE}
data("iris")
iris
iris <- iris %>% mutate(example_group = if_else(Petal.Length > 4, "long", "short"))

```

The output looks like this

```{r, echo = FALSE, eval = TRUE}
library(magrittr)
library(kableExtra)
library(dplyr)
data("iris")
reformatted_iris <- iris %>% mutate(example_group = if_else(Petal.Length > 4, "long", "short"))

display_iris <- reformatted_iris %>%
  slice_head(n = 5)


display_iris %>% kableExtra::kbl(format = "pipe")
```




```{r, eval=TRUE}
output_table <- prop_in_group(input_df = reformatted_iris,
              value_col = Petal.Length,
              breakdowns_vector = c("Species"),
              group_by_col = example_group,
              knowns_treatment = "count") 



```


```{r}
kableExtra::kbl(output_table, format = "pipe")

```




This creates the output contained in this table:
[test_prop.csv](https://github.com/tomambroseharris/THfuncs/files/9499011/test_prop.csv)

The proportion of total petal length that is contained in each species is split by the example group: short and long petal lengths, the mutate() assignment for which can be seen above. 
